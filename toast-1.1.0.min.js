this.toast=function(){var handled_resources={};return function(){var doc=document,head=doc.getElementsByTagName("head")[0],setTimeout=this.setTimeout,createElement="createElement",appendChild="appendChild",onreadystatechange="onreadystatechange",styleSheet="styleSheet",loading=0,decrementLoading=function(){--loading},i,loadResources=function(resources,callback,a,b){if(!head){setTimeout(function(){loadResources(resources)},10)}else if(resources.length){i=-1;while(a=resources[++i]){if((b=typeof a)=="function"){callback=function(){a();return true};break}else if(b=="string"){loadResource(a)}else if(a.pop){loadResource(a[0]);callback=a[1];break}}watchResources(callback,Array.prototype.slice.call(resources,i+1))}},loadResource=function(resource,a,b){b=/(^.+\.\w+)(\?.*)?$/.exec(resource)[1];if(handled_resources[b]){return}handled_resources[b]=1;++loading;if(/\.js$/.test(b)){a=doc[createElement]("script");a.src=resource;head[appendChild](a);if(a[onreadystatechange]===null){a[onreadystatechange]=watchScript}else{a.onload=decrementLoading}}else{a=doc[createElement]("link");a.rel=styleSheet;a.href=resource;head[appendChild](a);watchStylesheet(a)}},watchResources=function(callback,resourcesToLoad){if(!loading){if(!callback||callback()){loadResources(resourcesToLoad);return}}setTimeout(function(){watchResources(callback,resourcesToLoad)},10)},watchStylesheet=function(node){if(node.sheet||node[styleSheet]){decrementLoading();return}setTimeout(function(){watchStylesheet(node)},10)},watchScript=function(){if(/ded|co/.test(this.readyState)){decrementLoading()}};loadResources(arguments)}}();